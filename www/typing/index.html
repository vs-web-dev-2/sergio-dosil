<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <title>Juego de tecleo</title>
        <meta name="viewport" content="width=device-width" />
        <meta
            name="description"
            content="Curso de frontend para trabajadores de Vector"
        />
        <meta name="keywords" content="curso, vector, frontend" />
        <link rel="stylesheet" href="../styles/mvp.css" />
        <script>
            console.log("Empezando...");
        </script>
    </head>
    <body>
        <header>
            <h1>Juego de tecleo</h1>
        </header>
        <main>
            <cite id="frase">En un lugar de La Mancha</cite>
            <form>
                <input type="text" id="tecleo" />
                <button id="empezar">Empezar</button>
            </form>
            <p id="mensaje">Pulsa para empezar...</p>
        </main>
        <script>
            const nodoBotonEmpezar = document.getElementById("empezar");
            const nodoTecleo = document.getElementById("tecleo");
            const nodoMensaje = document.getElementById("mensaje");
            const frase = document.getElementById("frase").innerText;

            let inicio;

            nodoBotonEmpezar.addEventListener("click", (e) => {
                e.preventDefault();
                console.log("click");
                nodoTecleo.value = "";
                nodoTecleo.focus();
                nodoMensaje.innerText = "Empezando";
                inicio = Date.now();
            });

            nodoTecleo.addEventListener("input", (e) => {
                const tecleado = nodoTecleo.value;
                let tiempo = (Date.now() - inicio) / 1000;
                if (tecleado === frase) {
                    nodoMensaje.innerText =
                        "enhorabuena, terminado en " + tiempo;
                } else if (frase.startsWith(tecleado)) {
                    nodoMensaje.innerText = "Vas bien, llevas " + tiempo;
                } else {
                    nodoMensaje.innerText = "Vas fatal, llevas " + tiempo;
                }
            });
        </script>
        <footer>
            <p>Para Softtek y Vector por Alberto Basalo</p>
        </footer>
    </body>
</html>
